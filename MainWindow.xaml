<Window x:Class="IceSky.WpfLoading.Sample.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:IceSky.WpfLoading.Sample" 
        xmlns:system="clr-namespace:System;assembly=netstandard" 
        xmlns:anim="clr-namespace:IceSky.WpfLoading.Animations;assembly=IceSky.WpfLoading" 
        xmlns:control="clr-namespace:IceSky.WpfLoading;assembly=IceSky.WpfLoading"
        mc:Ignorable="d"
        Title="IceSky Loading Sample" Height="600" Width="820" Icon="/logo.ico">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/IceSky.WpfLoading;component/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    <Grid Background="#F8FAFC">
        <Grid.Resources>
            <anim:IntToBoolConverter x:Key="IntToBoolConverter"/>
            <anim:BoolInverseConverter x:Key="BoolInverseConverter"/>
            <Style TargetType="Slider">
                <Setter Property="TickFrequency" Value="1"/>
                <Setter Property="IsSnapToTickEnabled" Value="True"/>
                <Setter Property="Width" Value="100"/>
                <Setter Property="Margin" Value="5 0"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="HorizontalAlignment" Value="Left"/>
            </Style>
            <Style TargetType="TextBox">
                <Setter Property="Width" Value="40"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
            </Style>
            <Style TargetType="Separator">
                <Setter Property="Opacity" Value=".6"/>
            </Style>
        </Grid.Resources>
        <TabControl>
            <TabItem Header="Three Dot">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <WrapPanel HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10" ItemWidth="150" ItemHeight="100">

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Bounce" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Bounce Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Pulse" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Pulse Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Wave" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Wave Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Bouncing" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Bouncing Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Elastic" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Elastic Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Flashing" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Flashing Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Collision" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Collision Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Revolution" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Revolution Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Carousel" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Carousel Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="WindMill" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:WindMill Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Bricks" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Bricks Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Floating" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Floating Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Spin" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Spin Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Fire" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Fire Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Falling" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Falling Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Stretching" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Stretching Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Intersect" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Intersect Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Drop" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Drop Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Gathering" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Gathering Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="HourGlass" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:HourGlass Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Hexagon" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Hexagon Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Triangle" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Triangle Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Blink" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Blink Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Snake" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Snake Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Fish" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Fish Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Figure8" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Figure8 Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Pinball" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Pinball Color="#10B981"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Expand" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Expand Color="#4F46E5"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Swing" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Swing Color="#EC4899"/>
                        </StackPanel>

                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                            <TextBlock Text="Fireworks" HorizontalAlignment="Center" Margin="0 0 0 10"/>
                            <anim:Fireworks Color="#10B981"/>
                        </StackPanel>

                    </WrapPanel>
                </ScrollViewer>
            </TabItem>
            <TabItem Header="Loading Designer">
                <Grid Background="#F0F0F0">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="300"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <ScrollViewer Grid.Column="0" Padding="10" Background="White" BorderThickness="0 0 1 0" BorderBrush="#E0E0E0">
                        <StackPanel>
                            <TextBlock Text="基础设置" FontSize="14" FontWeight="Bold" Margin="0 5"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="元素宽度:"/>
                                <Slider x:Name="sldRectWidth" Minimum="1" Maximum="50" Value="10"/>
                                <TextBox Text="{Binding ElementName=sldRectWidth, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="元素高度:"/>
                                <Slider x:Name="sldRectHeight" Minimum="1" Maximum="50" Value="20"/>
                                <TextBox Text="{Binding ElementName=sldRectHeight, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="圆角半径:"/>
                                <Slider x:Name="sldCornerRadius" Minimum="0" Maximum="50" Value="0"/>
                                <TextBox Text="{Binding ElementName=sldCornerRadius, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="元素数量:"/>
                                <Slider x:Name="sldCount" Minimum="1" Maximum="50" Value="6" IsSnapToTickEnabled="True"/>
                                <TextBox Text="{Binding ElementName=sldCount, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>

                            <Separator Margin="0 5"/>
                            <TextBlock Text="颜色设置" FontSize="14" FontWeight="Bold" Margin="0 5"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="渐变起始色:" VerticalAlignment="Center"/>
                                <TextBox x:Name="tbColor1" Width="100" Text="#FF4A90E2" Margin="5 0"></TextBox>
                                <Border x:Name="bdColor1" Width="24" Height="20" BorderThickness="1" BorderBrush="#333" Background="{Binding ElementName=tbColor1,Path=Text}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="渐变结束色:" VerticalAlignment="Center"/>
                                <TextBox x:Name="tbColor2" Width="100" Text="#FF9013FE" Margin="5 0"></TextBox>
                                <Border x:Name="bdColor2" Width="24" Height="20" BorderThickness="1" BorderBrush="#333" Background="{Binding ElementName=tbColor2,Path=Text}"/>
                            </StackPanel>
                            <CheckBox x:Name="chkLoopColor" Content="循环颜色" Margin="0 5" IsChecked="True"/>

                            <Separator Margin="0 5"/>
                            <TextBlock Text="布局设置" FontSize="14" FontWeight="Bold" Margin="0 5"/>
                            <TextBlock Text="弯曲设置" FontSize="14" FontWeight="Bold" Margin="0 10 0 5"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="曲率:"/>
                                <Slider x:Name="sldArcDegree" Minimum="-100" Maximum="100" Value="100" TickFrequency="5"/>
                                <TextBox Text="{Binding ElementName=sldArcDegree, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="弧度:"/>
                                <Slider x:Name="sldCurveRange" Minimum="-360" Maximum="360" Value="360" TickFrequency="15"/>
                                <TextBox Text="{Binding ElementName=sldCurveRange, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="内径:"/>
                                <Slider x:Name="sldInnerRadius" Minimum="0" Maximum="200" Value="30" TickFrequency="5"/>
                                <TextBox Text="{Binding ElementName=sldInnerRadius, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <CheckBox x:Name="chkIsAverageSpacing" Content="平均分配间距" Margin="0 5 0 0" IsChecked="True"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5" IsEnabled="{Binding ElementName=chkIsAverageSpacing, Path=IsChecked, Converter={StaticResource BoolInverseConverter}}">
                                <TextBlock Text="间距:"/>
                                <Slider x:Name="sldSpacing" Minimum="-10" Maximum="50" Value="8"/>
                                <TextBox Text="{Binding ElementName=sldSpacing, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>


                            <Separator Margin="0 5"/>
                            <TextBlock Text="旋转动画" FontSize="14" FontWeight="Bold" Margin="0 5"/>
                            <CheckBox x:Name="chkIsRingRotation" Content="整体旋转" Margin="0 5 0 0"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5" IsEnabled="{Binding ElementName=chkIsRingRotation, Path=IsChecked}">
                                <TextBlock Text="转速(度/秒):"/>
                                <Slider x:Name="sldRotationSpeed" Minimum="-180" Maximum="180" Value="90" TickFrequency="15"/>
                                <TextBox Text="{Binding ElementName=sldRotationSpeed, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>
                            <CheckBox x:Name="chkIsDiscreteRingRotation" Content="离散旋转" Margin="0 5 0 0"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5" IsEnabled="{Binding ElementName=chkIsDiscreteRingRotation, Path=IsChecked}">
                                <TextBlock Text="转速(圈/秒):"/>
                                <Slider x:Name="sldDiscreteStepTime" Minimum="-2" Maximum="2" Value="0.5" TickFrequency="0.1"/>
                                <TextBox Text="{Binding ElementName=sldDiscreteStepTime, Path=Value, Mode=TwoWay,StringFormat=0.0}"/>
                            </StackPanel>
                            <CheckBox x:Name="chkIsRectRotate" Content="元素旋转" Margin="0 5 0 0"/>
                            <StackPanel Orientation="Horizontal" Margin="0 5" IsEnabled="{Binding ElementName=chkIsRectRotate, Path=IsChecked}">
                                <TextBlock Text="转速(度/秒):"/>
                                <Slider x:Name="sldRectRotateSpeed" Minimum="-360" Maximum="360" Value="180" TickFrequency="15"/>
                                <TextBox Text="{Binding ElementName=sldRectRotateSpeed, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>

                            <Separator Margin="0 5"/>
                            <TextBlock Text="变换设置" FontSize="14" FontWeight="Bold" Margin="0 5"/>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="变换时长(ms):"/>
                                    <Slider x:Name="sldSingleDuration" Minimum="0" Maximum="3000" Value="500" TickFrequency="50"/>
                                    <TextBox Text="{Binding ElementName=sldSingleDuration, Path=Value, Mode=TwoWay}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="延迟(ms):"/>
                                    <Slider x:Name="sldDelayTime" Minimum="-1000" Maximum="3000" Value="0" TickFrequency="50"/>
                                    <TextBox Text="{Binding ElementName=sldDelayTime, Path=Value, Mode=TwoWay}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="起始缩放X:"/>
                                    <Slider x:Name="sldStartScaleX" Minimum="-2" Maximum="2" Value="0.5" TickFrequency="0.1" LargeChange="0.5"/>
                                    <TextBox Text="{Binding ElementName=sldStartScaleX, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="结束缩放X:"/>
                                    <Slider x:Name="sldEndScaleX" Minimum="-2" Maximum="2" Value="1.0" TickFrequency="0.1" LargeChange="0.5"/>
                                    <TextBox Text="{Binding ElementName=sldEndScaleX, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="起始缩放Y:"/>
                                    <Slider x:Name="sldStartScaleY" Minimum="-2" Maximum="2" Value="0.5" TickFrequency="0.1" LargeChange="0.5"/>
                                    <TextBox Text="{Binding ElementName=sldStartScaleY, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="结束缩放Y:"/>
                                    <Slider x:Name="sldEndScaleY" Minimum="-2" Maximum="2" Value="1.0" TickFrequency="0.1" LargeChange="0.5"/>
                                    <TextBox Text="{Binding ElementName=sldEndScaleY, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="起始平移X:"/>
                                    <Slider x:Name="sldStartTransX" Minimum="-20" Maximum="20" Value="0" TickFrequency="1" LargeChange="5"/>
                                    <TextBox Text="{Binding ElementName=sldStartTransX, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="结束平移X:"/>
                                    <Slider x:Name="sldEndTransX" Minimum="-20" Maximum="20" Value="0" TickFrequency="1" LargeChange="5"/>
                                    <TextBox Text="{Binding ElementName=sldEndTransX, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="起始平移Y:"/>
                                    <Slider x:Name="sldStartTransY" Minimum="-20" Maximum="20" Value="0" TickFrequency="1" LargeChange="5"/>
                                    <TextBox Text="{Binding ElementName=sldStartTransY, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="结束平移Y:"/>
                                    <Slider x:Name="sldEndTransY" Minimum="-20" Maximum="20" Value="0" TickFrequency="1" LargeChange="5"/>
                                    <TextBox Text="{Binding ElementName=sldEndTransY, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5" Orientation="Horizontal">
                                <StackPanel Width="120">
                                    <TextBlock Text="起始透明度:"/>
                                    <Slider x:Name="sldStartOpacity" Minimum="0" Maximum="1" Value="0.3" TickFrequency="0.1" LargeChange="0.2"/>
                                    <TextBox Text="{Binding ElementName=sldStartOpacity, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                                <StackPanel Width="120" Margin="10 0 0 0">
                                    <TextBlock Text="结束透明度:"/>
                                    <Slider x:Name="sldEndOpacity" Minimum="0" Maximum="1" Value="1.0" TickFrequency="0.1" LargeChange="0.2"/>
                                    <TextBox Text="{Binding ElementName=sldEndOpacity, Path=Value, Mode=TwoWay,StringFormat=0.0}" Width="60" HorizontalAlignment="Left"/>
                                </StackPanel>
                            </StackPanel>
                            <StackPanel Margin="0 5">
                                <CheckBox x:Name="chkAutoReverse" Content="自动反转变换" IsChecked="True" Margin="0 5 0 0"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 5">
                                <TextBlock Text="重复次数(-1=无限):"/>
                                <Slider x:Name="sldRepeatCount" Minimum="-1" Maximum="20" Value="-1" TickFrequency="1"/>
                                <TextBox Text="{Binding ElementName=sldRepeatCount, Path=Value, Mode=TwoWay}"/>
                            </StackPanel>

                            <Button Content="复制控件代码" Click="BtnCopyCode_Click" Margin="0 10 0 0" Padding="10 5" Background="#4A90E2" Foreground="White" BorderThickness="0"/>
                            <Button Content="重置默认值" Click="BtnReset_Click" Margin="0 10 0 0" Padding="10 5"/>
                        </StackPanel>
                    </ScrollViewer>

                    <Grid Grid.Column="1" Margin="20">
                        <Border Name="bdBg" Background="White" CornerRadius="8" Padding="20" BorderBrush="#E0E0E0" BorderThickness="1" ClipToBounds="True">
                            <anim:GradientLoadingControl 
                                x:Name="loadingControl"
                                ItemWidth="{Binding ElementName=sldRectWidth, Path=Value}"
                                ItemHeight="{Binding ElementName=sldRectHeight, Path=Value}"
                                CornerRadius="{Binding ElementName=sldCornerRadius, Path=Value}"
                                Count="{Binding ElementName=sldCount, Path=Value}"
                                StartColor="{Binding ElementName=tbColor1, Path=Text}"
                                EndColor="{Binding ElementName=tbColor2, Path=Text}"
                                LoopColor="{Binding ElementName=chkLoopColor,Path=IsChecked}"
                                Spacing="{Binding ElementName=sldSpacing, Path=Value}"
                                IsAverageSpacing="{Binding ElementName=chkIsAverageSpacing, Path=IsChecked}"
                                ArcDegree="{Binding ElementName=sldArcDegree, Path=Value}"
                                CurveRange="{Binding ElementName=sldCurveRange, Path=Value}"
                                InnerRadius="{Binding ElementName=sldInnerRadius, Path=Value}"
                                IsRingRotation="{Binding ElementName=chkIsRingRotation, Path=IsChecked}"
                                RingRotationSpeed="{Binding ElementName=sldRotationSpeed, Path=Value}"
                                IsDiscreteRotation="{Binding ElementName=chkIsDiscreteRingRotation, Path=IsChecked}"
                                DiscreteRotateStepTime="{Binding ElementName=sldDiscreteStepTime, Path=Value}"
                                IsItemRotateAnimation="{Binding ElementName=chkIsRectRotate, Path=IsChecked}"
                                ItemRotateSpeed="{Binding ElementName=sldRectRotateSpeed, Path=Value}"
                                ItemAnimationDuration="{Binding ElementName=sldSingleDuration, Path=Value}"
                                DelayTime="{Binding ElementName=sldDelayTime,Path=Value}"
                                StartScaleX="{Binding ElementName=sldStartScaleX, Path=Value}"
                                EndScaleX="{Binding ElementName=sldEndScaleX, Path=Value}"
                                StartScaleY="{Binding ElementName=sldStartScaleY, Path=Value}"
                                EndScaleY="{Binding ElementName=sldEndScaleY, Path=Value}"
                                StartOffsetX="{Binding ElementName=sldStartTransX, Path=Value}"
                                EndOffsetX="{Binding ElementName=sldEndTransX, Path=Value}"
                                StartOffsetY="{Binding ElementName=sldStartTransY, Path=Value}"
                                EndOffsetY="{Binding ElementName=sldEndTransY, Path=Value}"
                                StartOpacity="{Binding ElementName=sldStartOpacity, Path=Value}"
                                EndOpacity="{Binding ElementName=sldEndOpacity, Path=Value}"
                                IsAnimationAutoReverse="{Binding ElementName=chkAutoReverse, Path=IsChecked}"
                                AnimationRepeatCount="{Binding ElementName=sldRepeatCount, Path=Value}"/>
                        </Border>
                        <CheckBox Name="cbDark" Margin="5" VerticalAlignment="Top" HorizontalAlignment="Left">Dark background</CheckBox>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Header="Mask">
                <Grid Background="#F5F7FA" x:Name="ParentPanel">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid Width="200" Background="White" Margin="5">
                        <StackPanel Margin="20" VerticalAlignment="Top">
                            <TextBlock Text="遮罩层参数设置" FontSize="16" FontWeight="Bold" Margin="0 0 0 20"/>

                            <StackPanel Margin="0 0 0 15">
                                <TextBlock Text="模糊半径" FontSize="12" Foreground="#333"/>
                                <Grid Margin="0 5 0 0">
                                    <Slider x:Name="sldBlurRadius" Minimum="0" Maximum="30" Value="10" 
                                Width="100" VerticalAlignment="Center"/>
                                    <TextBlock x:Name="txtBlurRadius" Text="{Binding ElementName=sldBlurRadius,Path=Value}" 
                                   Margin="110 0 0 0" VerticalAlignment="Center" Width="30"/>
                                </Grid>
                            </StackPanel>

                            <StackPanel Margin="0 0 0 15">
                                <TextBlock Text="遮罩透明度" FontSize="12" Foreground="#333"/>
                                <Grid Margin="0 5 0 0">
                                    <Slider x:Name="sldMaskOpacity" Minimum="0" Maximum="1" Value="0.7" 
                                Width="100" VerticalAlignment="Center" TickFrequency="0.1"/>
                                    <TextBlock x:Name="txtMaskOpacity" Text="{Binding ElementName=sldMaskOpacity,Path=Value}" 
                                   Margin="110 0 0 0" VerticalAlignment="Center" Width="30"/>
                                </Grid>
                            </StackPanel>

                            <StackPanel Margin="0 0 0 15">
                                <TextBlock Text="遮罩颜色" FontSize="12" Foreground="#333"/>
                                <TextBox x:Name="tbColorMsk" Width="100" Text="#FF4A90E2" Margin="5 0"></TextBox>
                                <Border x:Name="bdColorMsk" Width="24" Height="20" BorderThickness="1" BorderBrush="#333" Background="{Binding ElementName=tbColorMsk,Path=Text}"/>
                            </StackPanel>

                            <StackPanel Margin="0 0 0 15">
                                <TextBlock Text="超时时间(毫秒)" FontSize="12" Foreground="#333"/>
                                <TextBox x:Name="txtTimeoutMs" Text="8000" Width="100" Margin="0 5 0 0">
                                    <TextBox.InputBindings>
                                        <KeyBinding Key="Enter" Command="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=UpdateTimeoutCommand}"/>
                                    </TextBox.InputBindings>
                                </TextBox>
                            </StackPanel>

                            <StackPanel Margin="0 0 0 15">
                                <TextBlock Text="测试任务时长(秒)" FontSize="12" Foreground="#333"/>
                                <TextBox x:Name="txtTaskSeconds" Text="5" Width="100" Margin="0 5 0 0"/>
                            </StackPanel>
                        </StackPanel>
                    </Grid>

                    <Grid Grid.Column="1">
                        <StackPanel x:Name="BusinessGrid" VerticalAlignment="Center" HorizontalAlignment="Center">
                            <!--<StackPanel.Background>
                                <ImageBrush ImageSource="https://picsum.photos/800/450" Stretch="Fill"/>
                            </StackPanel.Background>-->
                            <Image Source="https://picsum.photos/800/450" Width="500" Height="300"/>
                            <Button Content="Show Mask" Width="220" Height="40" Click="ShowMask_Click" Margin="0 10"/>
                            <Button Content="Task Test" Width="220" Height="40" Click="ExecuteTask_Click" Margin="0 10"/>
                            <TextBlock Text="业务内容区域" FontSize="20" Margin="0 40 0 0" VerticalAlignment="Top" HorizontalAlignment="Center"/>
                        </StackPanel>

                        <control:MaskPanel x:Name="maskPanel"
                                     TargetBlurElement="{Binding ElementName=BusinessGrid}"
                                     MaskColor="{Binding ElementName=tbColorMsk,Path=Text}"
                                     MaskOpacity="{Binding ElementName=sldMaskOpacity,Path=Value}"
                                     BlurRadius="{Binding ElementName=sldBlurRadius,Path=Value}"
                                     TimeoutMilliseconds="{Binding ElementName=txtTimeoutMs,Path=Text}"
                                     TaskCompleted="MaskPanel_TaskCompleted"
                                     TaskCancelled="MaskPanel_TaskCancelled"
                                     OnTimeout="MaskPanel_Timeout">
                            <Border Width="300" Height="240" Background="White" CornerRadius="8">
                                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                    <TextBlock Text="处理中..." FontSize="20" Margin="0 0 0 10"/>
                                    <TextBlock x:Name="txtElapsedTime" Text="00:00:00" FontSize="18" Foreground="#E74C3C" Margin="0 10"/>
                                    <TextBlock Name="tbMsg" Text="已执行时间" FontSize="12" Foreground="#666" Margin="0 10"/>
                                    <TextBlock Name="tbTime" FontSize="20" Margin="0 10"/>
                                    <ProgressBar Width="200" Height="10" IsIndeterminate="True" Margin="0 10"/>
                                    <Button Content="取消操作" Width="100" Height="30" Click="CancelTask_Click" Background="#E74C3C" Foreground="White" BorderThickness="0"/>
                                </StackPanel>
                            </Border>
                        </control:MaskPanel>
                    </Grid>
                </Grid>
            </TabItem>
            <TabItem Header="ItemsControlTest">
                <Grid Background="#F5F5F5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="250" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="60" />
                    </Grid.RowDefinitions>

                    <Border Grid.Column="0" Grid.Row="0" Background="White" Margin="10" CornerRadius="8" Padding="15">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel>
                                <TextBlock Text="参数配置" FontSize="18" FontWeight="Bold" Margin="0 0 0 20" Foreground="#2C3E50"/>

                                <!-- 布局类型 -->
                                <StackPanel Margin="0 12 0 0">
                                    <TextBlock Text="布局类型" FontSize="13" Foreground="#666"/>
                                    <ComboBox x:Name="cbLayoutType" SelectedIndex="3" Margin="0 5 0 0">
                                        <ComboBoxItem Tag="Linear">直线布局</ComboBoxItem>
                                        <ComboBoxItem Tag="Circular">环形布局</ComboBoxItem>
                                        <ComboBoxItem Tag="Triangle">正三角形布局</ComboBoxItem>
                                        <ComboBoxItem Tag="Hexagon">正六边形布局</ComboBoxItem>
                                        <ComboBoxItem Tag="Rhombus">菱形布局</ComboBoxItem>
                                    </ComboBox>
                                </StackPanel>

                                <!-- 布局模式（三角形/六边形） -->
                                <StackPanel Margin="0 12 0 0" x:Name="pnlLayoutMode">
                                    <TextBlock Text="布局模式" FontSize="13" Foreground="#666"/>
                                    <ComboBox x:Name="cbLayoutMode" SelectedIndex="0" Margin="0 5 0 0">
                                        <ComboBoxItem Tag="Edge">边模式（均匀分布，包含顶点）</ComboBoxItem>
                                        <ComboBoxItem Tag="Grid">网格模式（6/3顶点+蜂窝网格）</ComboBoxItem>
                                    </ComboBox>
                                </StackPanel>

                                <!-- 网格参数（Grid模式） -->
                                <StackPanel Margin="0 12 0 0" x:Name="pnlGridParams">
                                    <TextBlock Text="网格参数（Wrap模式）" FontSize="13" Foreground="#666"/>
                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="单行/列数量" FontSize="12" Foreground="#888"/>
                                        <Slider x:Name="slGridLineCount" Minimum="2" Maximum="10" Value="5" TickFrequency="1" IsSnapToTickEnabled="True" Margin="0 3 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slGridLineCount, Path=Value, StringFormat=当前: {0}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>
                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="排列方向" FontSize="12" Foreground="#888"/>
                                        <RadioButton x:Name="rbHorizontal" Content="水平优先" IsChecked="True" Margin="0 3 0 0"/>
                                        <RadioButton x:Name="rbVertical" Content="垂直优先" Margin="0 2 0 0"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- 环形弧度（仅环形） -->
                                <StackPanel Margin="0 12 0 0" x:Name="pnlArcAngle">
                                    <TextBlock Text="环形弧度(°)" FontSize="13" Foreground="#666"/>
                                    <Slider x:Name="slArcAngle" Minimum="0" Maximum="360" Value="360" TickFrequency="10" IsSnapToTickEnabled="True" Margin="0 5 0 0"/>
                                    <TextBlock Text="{Binding ElementName=slArcAngle, Path=Value, StringFormat=当前: {0}°}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                </StackPanel>

                                <!-- 曲率参数（所有形状） -->
                                <StackPanel Margin="0 12 0 0">
                                    <TextBlock Text="曲率（0=压扁，1=标准）" FontSize="13" Foreground="#666"/>
                                    <Slider x:Name="slCurvature" Minimum="0.01" Maximum="1" Value="1" TickFrequency="0.05" IsSnapToTickEnabled="True" Margin="0 5 0 0"/>
                                    <TextBlock Text="{Binding ElementName=slCurvature, Path=Value, StringFormat=当前: {0:F2}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                </StackPanel>

                                <!-- 动态添加Items -->
                                <!--<StackPanel Margin="0 12 0 0">
                                    <TextBlock Text="元素数量（动态Items）" FontSize="13" Foreground="#666"/>
                                    <StackPanel Orientation="Horizontal" Margin="0 5 0 0">
                                        <Button x:Name="btnAddItem" Content="添加元素" Width="100" Margin="0 0 5 0" Click="BtnAddItem_Click"/>
                                        <Button x:Name="btnRemoveItem" Content="移除元素" Width="100" Margin="5 0 0 0" Click="BtnRemoveItem_Click"/>
                                        <TextBlock x:Name="txtItemCount" Text="当前：6个" Margin="10 0 0 0" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </StackPanel>-->

                                <StackPanel Margin="0 12 0 0">
                                    <TextBlock Text="动画参数" FontSize="14" FontWeight="SemiBold" Foreground="#2C3E50" Margin="0 0 0 5"/>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="起点缩放" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slStartScale" Minimum="0" Maximum="1" Value="0.2" TickFrequency="0.1" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slStartScale, Path=Value, StringFormat=当前: {0:F1}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="终点缩放" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slEndScale" Minimum="0" Maximum="2" Value="1.2" TickFrequency="0.1" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slEndScale, Path=Value, StringFormat=当前: {0:F1}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="起点不透明度" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slStartOpacity" Minimum="0" Maximum="1" Value="0.1" TickFrequency="0.05" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slStartOpacity, Path=Value, StringFormat=当前: {0:F2}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="终点不透明度" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slEndOpacity" Minimum="0" Maximum="1" Value="1.0" TickFrequency="0.05" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slEndOpacity, Path=Value, StringFormat=当前: {0:F2}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="X轴位移幅度(像素)" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slXOffset" Minimum="-10" Maximum="30" Value="10" TickFrequency="1" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slXOffset, Path=Value, StringFormat=当前: {0}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="Y轴位移幅度(像素)" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slYOffset" Minimum="-10" Maximum="30" Value="10" TickFrequency="1" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slYOffset, Path=Value, StringFormat=当前: {0}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="动画时长(ms)" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slAnimationDuration" Minimum="500" Maximum="3000" Value="1500" TickFrequency="100" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slAnimationDuration, Path=Value, StringFormat=当前: {0}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>

                                    <StackPanel Margin="0 5 0 0">
                                        <TextBlock Text="动画延迟(ms)" FontSize="13" Foreground="#666"/>
                                        <Slider x:Name="slAnimationDelay" Minimum="-100" Maximum="500" Value="150" TickFrequency="10" Margin="0 5 0 0"/>
                                        <TextBlock Text="{Binding ElementName=slAnimationDelay, Path=Value, StringFormat=当前: {0}}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                    </StackPanel>
                                </StackPanel>

                                <StackPanel Margin="0 12 0 0">
                                    <TextBlock Text="Item边距" FontSize="13" Foreground="#666"/>
                                    <Slider x:Name="slItemMargin" Minimum="0" Maximum="50" Value="10" TickFrequency="5" Margin="0 5 0 0"/>
                                    <TextBlock Text="{Binding ElementName=slItemMargin, Path=Value, StringFormat=当前: {0}px}" FontSize="11" Foreground="#999" HorizontalAlignment="Right"/>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>

                    <Border Grid.Column="1" Grid.Row="0" Grid.RowSpan="2" Background="White" Margin="10" CornerRadius="8">
                        <control:AnimateItemsControl 
                                x:Name="loading"
                                LayoutType="{Binding ElementName=cbLayoutType, Path=SelectedItem.Tag, Converter={StaticResource StringToLayoutTypeConverter}}"
                                LayoutMode="{Binding ElementName=cbLayoutMode, Path=SelectedItem.Tag, Converter={StaticResource StringToLayoutModeConverter}}"
                                ArcAngle="{Binding ElementName=slArcAngle, Path=Value}"
                                Curvature="{Binding ElementName=slCurvature, Path=Value}"
                                GridLineCount="{Binding ElementName=slGridLineCount, Path=Value}"
                                GridDirection="{Binding ElementName=rbHorizontal, Path=IsChecked, Converter={StaticResource BoolToGridDirectionConverter}}"
                                StartScale="{Binding ElementName=slStartScale, Path=Value}"
                                EndScale="{Binding ElementName=slEndScale, Path=Value}"
                                StartOpacity="{Binding ElementName=slStartOpacity, Path=Value}"
                                EndOpacity="{Binding ElementName=slEndOpacity, Path=Value}"
                                XOffset="{Binding ElementName=slXOffset, Path=Value}"
                                YOffset="{Binding ElementName=slYOffset, Path=Value}"
                                AnimationDuration="{Binding ElementName=slAnimationDuration, Path=Value}"
                                AnimationDelay="{Binding ElementName=slAnimationDelay, Path=Value}">

                            <control:AnimateItemsControl.ItemContainerStyle>
                                <Style TargetType="ContentPresenter">
                                    <Setter Property="Margin" Value="{Binding ElementName=slItemMargin, Path=Value}"/>
                                    <Setter Property="ContentTemplate">
                                        <Setter.Value>
                                            <DataTemplate>
                                                <Grid>
                                                    <Ellipse Width="10" Height="10" Fill="DeepSkyBlue" Stroke="LightBlue" StrokeThickness="1"/>
                                                    <!--<TextBlock Text="{Binding}"/>-->
                                                </Grid>
                                            </DataTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </control:AnimateItemsControl.ItemContainerStyle>
                        </control:AnimateItemsControl>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
